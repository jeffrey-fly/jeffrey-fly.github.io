<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"jeffrey-fly-github-io.pages.dev","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.26.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false,"trigger":"auto"}}</script><script src="/js/config.js" defer></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="QuantumRealm">
<meta property="og:url" content="https://jeffrey-fly-github-io.pages.dev/page/5/index.html">
<meta property="og:site_name" content="QuantumRealm">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jeffrey">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://jeffrey-fly-github-io.pages.dev/page/5/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/5/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>QuantumRealm</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.5.0/search.js" integrity="sha256-xFC6PJ82SL9b3WkGjFavNiA9gm5z6UBxWPiu4CYjptg=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>







  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="QuantumRealm" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">QuantumRealm</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-archive"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archive</a></li><li class="menu-item menu-item-docs"><a href="/docs/" rel="section"><i class="fa fa-book fa-fw"></i>docs</a></li><li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>rss</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="Searching..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jeffrey"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Jeffrey</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">49</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="mailto:jeffreyfly@icloud.com" title="E-Mail â†’ mailto:jeffreyfly@icloud.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jeffrey-fly-github-io.pages.dev/2024/11/11/debug/nonstop/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Jeffrey">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QuantumRealm">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | QuantumRealm">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/11/debug/nonstop/" class="post-title-link" itemprop="url">gdb å¼‚æ­¥è°ƒè¯•</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-11-11 10:59:00" itemprop="dateCreated datePublished" datetime="2024-11-11T10:59:00+08:00">2024-11-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/debug/" itemprop="url" rel="index"><span itemprop="name">debug</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="ä½¿ç”¨å¦‚ä¸‹-gdbinit-æ–‡ä»¶"><a href="#ä½¿ç”¨å¦‚ä¸‹-gdbinit-æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨å¦‚ä¸‹.gdbinit æ–‡ä»¶"></a>ä½¿ç”¨å¦‚ä¸‹.gdbinit æ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> target-async 1 </span><br><span class="line"><span class="built_in">set</span> pagination off </span><br><span class="line"><span class="built_in">set</span> non-stop on</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> <span class="built_in">print</span> pretty on</span><br><span class="line"><span class="built_in">set</span> <span class="built_in">print</span> object on</span><br><span class="line"><span class="built_in">set</span> <span class="built_in">print</span> static-members on</span><br><span class="line"><span class="built_in">set</span> <span class="built_in">print</span> demangle on</span><br><span class="line"><span class="built_in">set</span> <span class="built_in">print</span> sevenbit-strings off</span><br><span class="line"></span><br><span class="line">python </span><br><span class="line">import sys</span><br><span class="line">sys.path.insert(0,<span class="string">&#x27;/usr/share/gcc-4.8.2/python*) </span></span><br><span class="line"><span class="string">from libstdcxx.v6.printers import register_libstdcxx_printers</span></span><br><span class="line"><span class="string">register_libstdcxx_printers (None)</span></span><br><span class="line"><span class="string">end</span></span><br></pre></td></tr></table></figure>
<h2 id="GDB-åŠ è½½è„šæœ¬æ¡ä»¶"><a href="#GDB-åŠ è½½è„šæœ¬æ¡ä»¶" class="headerlink" title="GDB åŠ è½½è„šæœ¬æ¡ä»¶"></a>GDB åŠ è½½è„šæœ¬æ¡ä»¶</h2><ol>
<li><p>è·¯å¾„å®Œå…¨åŒ¹é…ï¼ˆæ ¸å¿ƒæ¡ä»¶ï¼‰<br>GDB çš„è‡ªåŠ¨åŠ è½½é€»è¾‘éå¸¸æ­»æ¿ï¼Œå®ƒä¼šæ ¹æ®ä½ çš„ç¨‹åºé“¾æ¥çš„ libstdc++.so.6 çš„çœŸå®ç‰©ç†è·¯å¾„æ¥æ‹¼æ¥æŸ¥æ‰¾è·¯å¾„ã€‚<br>å¦‚æœä½ çš„ç¨‹åºé“¾æ¥çš„æ˜¯ &#x2F;usr&#x2F;lib64&#x2F;libstdc++.so.6ï¼Œé‚£ä¹ˆ GDB ä¼šå°è¯•åœ¨ä»¥ä¸‹ä½ç½®æŸ¥æ‰¾ï¼š [auto-load æ ¹ç›®å½•] + [åº“çš„ç»å¯¹è·¯å¾„] + [-gdb.py è„šæœ¬]<br>å³ï¼š&#x2F;usr&#x2F;share&#x2F;gdb&#x2F;auto-load + &#x2F;usr&#x2F;lib64&#x2F;libstdc++.so.6 + -gdb.py ä¹Ÿå°±æ˜¯ä½ æ‰¾åˆ°çš„ï¼š&#x2F;usr&#x2F;share&#x2F;gdb&#x2F;auto-load&#x2F;usr&#x2F;lib64&#x2F;libstdc++.so.6-gdb.pyã€‚</p>
</li>
<li><p>å¿…é¡»å¼€å¯ safe-path æƒé™<br>å³ä½¿æ–‡ä»¶ä½ç½®å¯¹äº†ï¼ŒGDB ä¸ºäº†å®‰å…¨é»˜è®¤ä¹Ÿæ˜¯ä¸è¿è¡Œå®ƒçš„ã€‚ä½ éœ€è¦ç»™å®ƒâ€œæˆæƒâ€ã€‚    </p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set auto-load safe-path /</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="Check-script-load-status"><a href="#Check-script-load-status" class="headerlink" title="Check script load status"></a>Check script load status</h2><p>start gdbï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">info auto-load python-scripts</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jeffrey-fly-github-io.pages.dev/2024/10/27/debug/pprof/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Jeffrey">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QuantumRealm">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | QuantumRealm">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/10/27/debug/pprof/" class="post-title-link" itemprop="url">åˆ†ætcmalloc å†…å­˜å¢é•¿ â€”- pprof</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-10-27 09:44:27" itemprop="dateCreated datePublished" datetime="2024-10-27T09:44:27+08:00">2024-10-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/debug/" itemprop="url" rel="index"><span itemprop="name">debug</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>æœ‰æ—¶å€™ç¨‹åºè«åå†…å­˜ä¸Šæ¶¨å‰å®³ï¼Œä½†ä¸æ˜¯æ³„æ¼ï¼Œå¦‚ä½•å®šä½å“ªç”³è¯·ä½¿ç”¨çš„å¤§é‡å†…å­˜å‘¢ï¼Ÿ</p>
<p>å¦‚æœæ²¡ä½¿ç”¨tcmallocï¼Œä½¿ç”¨heaptrackå·¥å…·ï¼ˆgit clone <a target="_blank" rel="noopener" href="https://github.com/KDE/heaptrack.git%EF%BC%89%EF%BC%9B">https://github.com/KDE/heaptrack.gitï¼‰ï¼›</a></p>
<p>å¦‚æœä½¿ç”¨äº†tcmallocï¼Œå¯ä»¥é€šè¿‡tcmallocè‡ªå¸¦çš„å·¥å…·æ¥åˆ†æ</p>
<h2 id="ä¸€-å·¥å…·"><a href="#ä¸€-å·¥å…·" class="headerlink" title="ä¸€ å·¥å…·"></a>ä¸€ å·¥å…·</h2><ol>
<li>tcmalloc</li>
<li>pprof</li>
</ol>
<p>pprofç›¸å½“äºåˆ†æå™¨ï¼Œé˜…è¯»å™¨ï¼Œåˆ†æé˜…è¯»çš„å†…å®¹ä¸ºheapæ–‡ä»¶ï¼Œå†…å®¹åŒ…æ‹¬  </p>
<ul>
<li>æ¯ä¸ªæ´»è·ƒåˆ†é…çš„å¤§å°</li>
<li>åˆ†é…çš„è°ƒç”¨æ ˆ</li>
<li>åˆ†é…æ¬¡æ•°</li>
</ul>
<h2 id="äºŒ-ç”Ÿæˆheapæ–‡ä»¶"><a href="#äºŒ-ç”Ÿæˆheapæ–‡ä»¶" class="headerlink" title="äºŒ ç”Ÿæˆheapæ–‡ä»¶"></a>äºŒ ç”Ÿæˆheapæ–‡ä»¶</h2><ul>
<li><p>æ‰‹åŠ¨<br>åœ¨ç¨‹åºçš„å…¥å£æˆ–éœ€è¦å¼€å§‹åˆ†æçš„åœ°æ–¹ï¼Œæ·»åŠ  HeapProfilerStart(â€œæ–‡ä»¶è·¯å¾„â€)ã€‚<br>åœ¨ç¨‹åºç»“æŸæˆ–éœ€è¦åœæ­¢åˆ†æçš„åœ°æ–¹ï¼Œæ·»åŠ  HeapProfilerStop()ã€‚<br>åœ¨éœ€è¦æ‰‹åŠ¨ç”Ÿæˆå¿«ç…§çš„åœ°æ–¹ï¼Œæ·»åŠ  HeapProfilerDump(â€œæ–‡ä»¶åâ€)ã€‚</p>
</li>
<li><p>è‡ªåŠ¨<br>è®¾ç½®ç¯å¢ƒå˜é‡ï¼ŒåŠ¨æ€åŠ è½½è®¾ç½®ç¯å¢ƒå˜é‡å³å¯ï¼Œtcmallocåº“åŠ è½½æ—¶ä¼šè¯»å–å¹¶è§£æè¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œä»è€Œå¼€å¯å †åˆ†æåŠŸèƒ½</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HEAP_PROFILE=/tmp/myapp_heap</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¦‚æœæ˜¯é™æ€åŠ è½½ï¼Œéœ€ä»£ç ä¸­å¯åŠ¨ï¼šHeapProfilerStart</p>
</blockquote>
</li>
<li><p>è¡¥å……è¯´æ˜<br>è‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶çš„æ—¶æœºï¼šç”³è¯·å†…å­˜è¶…è¿‡é˜ˆå€¼æ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œé˜ˆå€¼å¯ä»¥é€šè¿‡HEAP_PROFILE_ALLOCATION_INTERVALç¯å¢ƒå˜é‡æ¥è®¾ç½®</p>
</li>
</ul>
<h2 id="ä¸‰-åˆ†æheapæ–‡ä»¶ï¼ˆå¿«ç…§ï¼‰"><a href="#ä¸‰-åˆ†æheapæ–‡ä»¶ï¼ˆå¿«ç…§ï¼‰" class="headerlink" title="ä¸‰ åˆ†æheapæ–‡ä»¶ï¼ˆå¿«ç…§ï¼‰"></a>ä¸‰ åˆ†æheapæ–‡ä»¶ï¼ˆå¿«ç…§ï¼‰</h2><h3 id="å•æ¬¡å¿«ç…§"><a href="#å•æ¬¡å¿«ç…§" class="headerlink" title="å•æ¬¡å¿«ç…§"></a>å•æ¬¡å¿«ç…§</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–‡æœ¬æ ¼å¼</span></span><br><span class="line">pprof test_heap --text /tmp/test_heap.0001.heap</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç«ç„°å›¾</span></span><br><span class="line">pprof --svg /path/to/my_program.hprof &gt; flamegraph.svg</span><br></pre></td></tr></table></figure>
<h3 id="ä¸¤æ¬¡å¿«ç…§ï¼š"><a href="#ä¸¤æ¬¡å¿«ç…§ï¼š" class="headerlink" title="ä¸¤æ¬¡å¿«ç…§ï¼š"></a>ä¸¤æ¬¡å¿«ç…§ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹æ¯”ä¸¤æ¬¡å¿«ç…§</span></span><br><span class="line">pprof --inuse_space --base=/tmp/my_app.0001.heap /tmp/my_app.0002.heap</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆç«ç„°å›¾</span></span><br><span class="line">pprof --svg --inuse_space --base=/tmp/my_app.0001.heap /tmp/my_app.0002.heap &gt; diff_flamegraph.svg</span><br></pre></td></tr></table></figure>
<p>ç«ç„°å›¾éœ€è¦é¢å¤–å®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install graphviz</span><br></pre></td></tr></table></figure>
<h3 id="sample"><a href="#sample" class="headerlink" title="sample"></a>sample</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;gperftools/heap-profiler.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    HeapProfilerStart(<span class="string">&quot;/tmp/test_heap&quot;</span>);</span><br><span class="line">    <span class="type">void</span>* p = <span class="built_in">malloc</span>(<span class="number">16</span> * <span class="number">1024</span> * <span class="number">1024</span>); <span class="comment">// åˆ†é… 16MB</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Allocated 16MB\n&quot;</span>;</span><br><span class="line">    HeapProfilerDump(<span class="string">&quot;after_alloc&quot;</span>);</span><br><span class="line">    <span class="built_in">free</span>(p);</span><br><span class="line">    HeapProfilerStop();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ test_heap.cc -ltcmalloc -lpthread -lunwind -o test_heap</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jeffrey-fly-github-io.pages.dev/2024/10/24/linux/File%20Descriptor%20Limits/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Jeffrey">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QuantumRealm">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | QuantumRealm">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/10/24/linux/File%20Descriptor%20Limits/" class="post-title-link" itemprop="url">File Descriptor Limits</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-10-24 15:52:16" itemprop="dateCreated datePublished" datetime="2024-10-24T15:52:16+08:00">2024-10-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://0pointer.net/blog/file-descriptor-limits.html">https://0pointer.net/blog/file-descriptor-limits.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jeffrey-fly-github-io.pages.dev/2024/06/30/postgresql/Install-postgres-from-codes-in-linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Jeffrey">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QuantumRealm">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | QuantumRealm">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/06/30/postgresql/Install-postgres-from-codes-in-linux/" class="post-title-link" itemprop="url">Install postgres from codes in linux</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-06-30 15:41:43" itemprop="dateCreated datePublished" datetime="2024-06-30T15:41:43+08:00">2024-06-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/postgresql/" itemprop="url" rel="index"><span itemprop="name">postgresql</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>First, we need to create a postgres user and add it to the sudo group</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -aG <span class="built_in">sudo</span> postgres <span class="comment"># æ³¨æ„å®‰å…¨ï¼Œäº‘ä¸»æœºä¸è¦è¿™ä¹ˆè®¾ç½®</span></span><br></pre></td></tr></table></figure>

<h2 id="Get-codes"><a href="#Get-codes" class="headerlink" title="Get codes"></a>Get codes</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth=1 https://git.postgresql.org/git/postgresql.git</span><br></pre></td></tr></table></figure>
<p>Compile after installing dependencies</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install -y \</span><br><span class="line">  build-essential \</span><br><span class="line">  libreadline-dev \</span><br><span class="line">  zlib1g-dev \</span><br><span class="line">  flex \</span><br><span class="line">  bison \</span><br><span class="line">  libxml2-dev \</span><br><span class="line">  libxslt1-dev \</span><br><span class="line">  libssl-dev \</span><br><span class="line">  libpam0g-dev \</span><br><span class="line">  libedit-dev \</span><br><span class="line">  libldap2-dev \</span><br><span class="line">  libicu-dev \</span><br><span class="line">  tcl-dev \</span><br><span class="line">  uuid-dev \</span><br><span class="line">  python3-dev \</span><br><span class="line">  libperl-dev \</span><br><span class="line">  llvm-dev \</span><br><span class="line">  clang \</span><br><span class="line">  libperl-dev \</span><br><span class="line">  libpython3-dev \</span><br><span class="line">  libossp-uuid-dev \</span><br><span class="line">  systemtap-sdt-dev \</span><br><span class="line">  pkg-config</span><br><span class="line">./configure --enable-debug <span class="string">&#x27;CFLAGS=-O0 -g&#x27;</span> --enable-cassert --enable-depend --enable-dtrace --without-icu --with-llvm --prefix</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<h2 id="Modify-environment-variables"><a href="#Modify-environment-variables" class="headerlink" title="Modify environment variables"></a>Modify environment variables</h2><p>create a configure file</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.pg_env</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®å½“å‰ä½¿ç”¨çš„ PostgreSQL å®‰è£…è·¯å¾„</span></span><br><span class="line"><span class="built_in">export</span> PG_HOME=<span class="variable">$HOME</span>/pgsql</span><br><span class="line"><span class="built_in">export</span> PGDATA=<span class="variable">$HOME</span>/pgdata</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PG_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$PG_HOME</span>/lib:<span class="variable">$LD_LIBRARY_PATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯é€‰ï¼šæ˜¾ç¤ºå½“å‰ PostgreSQL ç‰ˆæœ¬</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ğŸ”§ Loaded PG env: <span class="subst">$(pg_config --version)</span>&quot;</span></span><br><span class="line">åœ¨ ~/.bashrc æœ«å°¾åŠ ä¸Šè¿™ä¸€è¡Œï¼š</span><br><span class="line">[ -f ~/.pg_env ] &amp;&amp; <span class="built_in">source</span> ~/.pg_env</span><br></pre></td></tr></table></figure>
<h2 id="initdb"><a href="#initdb" class="headerlink" title="initdb"></a>initdb</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">chown</span> -R postgres:postgres /usr/local/pgsql</span><br><span class="line">initdb</span><br></pre></td></tr></table></figure>
<h2 id="start"><a href="#start" class="headerlink" title="start"></a>start</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pg_ctl -D /usr/local/pgsql/data -l logfile start</span><br></pre></td></tr></table></figure>

<h2 id="About-Extensions"><a href="#About-Extensions" class="headerlink" title="About Extensions"></a>About Extensions</h2><p>cd contrib</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<p>ç™»å½•ä½ è¦ä½¿ç”¨çš„æ•°æ®åº“ï¼Œç„¶åæ‰§è¡Œï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> EXTENSION pageinspect;</span><br><span class="line">\dx</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jeffrey-fly-github-io.pages.dev/2024/05/11/tools/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Jeffrey">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QuantumRealm">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | QuantumRealm">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/05/11/tools/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-05-11 10:59:00" itemprop="dateCreated datePublished" datetime="2024-05-11T10:59:00+08:00">2024-05-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tools/" itemprop="url" rel="index"><span itemprop="name">tools</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="about-draft"><a href="#about-draft" class="headerlink" title="about draft"></a>about draft</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo new draft &quot;è‰ç¨¿æ ‡é¢˜&quot;</span><br><span class="line">hexo server --draft</span><br><span class="line">//xxxä¸å¸¦mdåç¼€</span><br><span class="line">hexo publish post xxx </span><br></pre></td></tr></table></figure>

<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jeffrey-fly-github-io.pages.dev/2024/01/04/python/about-pytest/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Jeffrey">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QuantumRealm">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | QuantumRealm">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/01/04/python/about-pytest/" class="post-title-link" itemprop="url">About pytest</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-01-04 17:17:37" itemprop="dateCreated datePublished" datetime="2024-01-04T17:17:37+08:00">2024-01-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Install-dependencies"><a href="#Install-dependencies" class="headerlink" title="Install dependencies"></a>Install dependencies</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pytest pytest-cov</span><br></pre></td></tr></table></figure>

<h2 id="Check-coverage"><a href="#Check-coverage" class="headerlink" title="Check coverage"></a>Check coverage</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python -m pytest --cov=myutil</span><br><span class="line">python -m pytest --cov=myutil --cov-report=term-missing</span><br><span class="line"></span><br><span class="line">python -m pytest --cov=myutil.myjson</span><br><span class="line">python -m pytest tests/test_myjson.py --cov=myutil</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Generate-html-file"><a href="#Generate-html-file" class="headerlink" title="Generate html file"></a>Generate html file</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m pytest --cov=myutil --cov-report=html</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jeffrey-fly-github-io.pages.dev/2023/12/17/tools/git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Jeffrey">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QuantumRealm">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | QuantumRealm">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/12/17/tools/git/" class="post-title-link" itemprop="url">git</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-12-17 19:57:11" itemprop="dateCreated datePublished" datetime="2023-12-17T19:57:11+08:00">2023-12-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tools/" itemprop="url" rel="index"><span itemprop="name">tools</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ol>
<li>é…ç½® <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;Jeffrey&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;jeffreyfly@icloud.com&quot;</span></span><br><span class="line">git config --global pull.rebase <span class="literal">true</span></span><br><span class="line">git config --global credential.helper store</span><br><span class="line">git config --global push.default simple</span><br><span class="line">git config --global -l</span><br></pre></td></tr></table></figure></li>
<li>åˆå¹¶æäº¤ï¼ˆæœ¬åœ°æœªpushï¼‰ <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br><span class="line">git add -u</span><br><span class="line">git commit --amend --no-edit</span><br></pre></td></tr></table></figure></li>
<li>commit åˆå¹¶</li>
</ol>
<ul>
<li>æ–¹æ³•1:  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i HEAD~3</span><br><span class="line"></span><br><span class="line">pick abc123 Commit message 1</span><br><span class="line">pick def456 Commit message 2</span><br><span class="line">pick 789abc Commit message 3</span><br></pre></td></tr></table></figure>
  å°†ä½ æƒ³åˆå¹¶çš„æäº¤æ”¹ä¸º squash æˆ–ç®€å†™ sï¼Œä¿ç•™ç¬¬ä¸€ä¸ª pick ä¸åŠ¨ï¼š  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pick abc123 Commit message 1</span><br><span class="line">squash def456 Commit message 2</span><br><span class="line">squash 789abc Commit message 3</span><br></pre></td></tr></table></figure>
  ä¿å­˜é€€å‡ºï¼ŒGit ä¼šè®©ä½ ç¼–è¾‘æœ€ç»ˆçš„ commit messageï¼Œåˆå¹¶æˆ–è€…ä¿®æ”¹åä¿å­˜å³å¯ã€‚<br>  å¼ºè¡Œæ¨é€ï¼š  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin your-branch --force-with-lease</span><br></pre></td></tr></table></figure></li>
<li>æ–¹æ³•2  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># å›åˆ°ä¸Šä¸€æ¬¡ push çš„çŠ¶æ€ï¼ˆæˆ–è€…æƒ³ä½œä¸ºåŸºå‡†çš„ commitï¼‰</span><br><span class="line">git reset --soft origin/your-branch</span><br><span class="line"># æˆ–è€… git reset --soft HEAD~N ï¼ˆå¦‚æœä½ æƒ³æ•° N ä¸ªæäº¤çš„è¯ï¼‰</span><br><span class="line"></span><br><span class="line"># å°†æ‰€æœ‰æ”¹åŠ¨é‡æ–°æäº¤ä¸ºä¸€ä¸ª commit</span><br><span class="line">git commit -m &quot;åˆå¹¶åçš„ commit message&quot;</span><br><span class="line"></span><br><span class="line"># æ¨é€åˆ°è¿œç¨‹ï¼ˆå·² push çš„åˆ†æ”¯éœ€è¦å¼ºåˆ¶ï¼‰</span><br><span class="line">git push --force-with-lease</span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="4">
<li><p>å¿½ç•¥æ‰€æœ‰åä¸º build çš„ç›®å½•<br>ç¼–è¾‘.gitignore æ–‡ä»¶</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ä¿ç•™ä»“åº“æ ¹ç›®å½•ä¸‹çš„ build/README.md</span><br><span class="line">build/</span><br><span class="line">**/build/*.log</span><br><span class="line"></span><br><span class="line">//ä»»æ„å±‚çº§ build ç›®å½•ä¸‹çš„ README.md</span><br><span class="line">build/</span><br><span class="line">!**/build/</span><br><span class="line">!**/build/README.md</span><br></pre></td></tr></table></figure>
</li>
<li><p>rebase</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git fetch origin</span><br><span class="line">git rebase origin/main</span><br><span class="line">git add xxx.cpp</span><br><span class="line">git rebase --<span class="built_in">continue</span> / abort</span><br><span class="line">git push --force-with-lease</span><br><span class="line">git push orign &lt;localbranch&gt;:&lt;remotebranch&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŠŠæ–‡ä»¶å›é€€åˆ°å®ƒçš„ä¸Šä¸€æ¬¡ä¿®æ”¹</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout $(git log -n 1 --pretty=format:%H -- path/to/file) -- path/to/file</span><br></pre></td></tr></table></figure>
</li>
<li><p>åªæŸ¥çœ‹å‘ç”Ÿå˜æ›´çš„æ–‡ä»¶åï¼ˆä¸çœ‹å…·ä½“ diff å†…å®¹ï¼‰</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git diff --name-only           # å·¥ä½œåŒº â†” æš‚å­˜åŒº</span><br><span class="line">git diff --staged --name-only  # æš‚å­˜åŒº vs HEAD</span><br><span class="line">git diff HEAD --name-only      # å·¥ä½œåŒº vs HEAD</span><br><span class="line">git diff origin/main HEAD --name-only  # è¿œç«¯åˆ†æ”¯ vs HEAD</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ›´æ”¹ä½œè€…</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend --author=&quot;Your Name &lt;your@email.com&gt;&quot;</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jeffrey-fly-github-io.pages.dev/2023/11/05/tools/docker-compose/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Jeffrey">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QuantumRealm">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | QuantumRealm">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/11/05/tools/docker-compose/" class="post-title-link" itemprop="url">docker compose</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-11-05 20:17:05" itemprop="dateCreated datePublished" datetime="2023-11-05T20:17:05+08:00">2023-11-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tools/" itemprop="url" rel="index"><span itemprop="name">tools</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="ä¸€-Docker-Compose-æ˜¯ä»€ä¹ˆ"><a href="#ä¸€-Docker-Compose-æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€. Docker Compose æ˜¯ä»€ä¹ˆ"></a>ä¸€. Docker Compose æ˜¯ä»€ä¹ˆ</h2><ul>
<li><p>Docker Compose æ˜¯ Docker å®˜æ–¹æä¾›çš„å·¥å…·ï¼Œç”¨äºå®šä¹‰å’Œç®¡ç†å¤šå®¹å™¨åº”ç”¨ã€‚</p>
</li>
<li><p>å®ƒå…è®¸ä½ ç”¨ä¸€ä¸ª YAML æ–‡ä»¶ æè¿°æ•´ä¸ªåº”ç”¨çš„æœåŠ¡ï¼ˆcontainersï¼‰ã€ç½‘ç»œã€å·ã€ç¯å¢ƒå˜é‡ç­‰ï¼Œç„¶åä¸€æ¡å‘½ä»¤å°±èƒ½åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€é”€æ¯æ•´ä¸ªåº”ç”¨ã€‚</p>
</li>
<li><p>ä¸»è¦ç›®æ ‡æ˜¯ å£°æ˜å¼ç®¡ç† â€”â€” ä½ åªå†™é…ç½®æ–‡ä»¶ï¼ŒCompose ç¡®ä¿å®¹å™¨çŠ¶æ€å’Œé…ç½®ä¸€è‡´ã€‚</p>
</li>
</ul>
<p>ç®€å•ç†è§£ï¼š<br>Docker æ˜¯ç®¡ä¸€ä¸ªå®¹å™¨ï¼ŒCompose æ˜¯ç®¡ç†ä¸€å †å®¹å™¨çš„åº”ç”¨ã€‚</p>
<h2 id="äºŒ-Compose-çš„æ ¸å¿ƒæ¦‚å¿µ"><a href="#äºŒ-Compose-çš„æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="äºŒ. Compose çš„æ ¸å¿ƒæ¦‚å¿µ"></a>äºŒ. Compose çš„æ ¸å¿ƒæ¦‚å¿µ</h2><table>
<thead>
<tr>
<th>æ¦‚å¿µ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Serviceï¼ˆæœåŠ¡ï¼‰</strong></td>
<td>YAML æ–‡ä»¶é‡Œå®šä¹‰çš„ä¸€ä¸ªå®¹å™¨ï¼ŒåŒ…æ‹¬é•œåƒã€ç«¯å£ã€ç¯å¢ƒå˜é‡ã€å·æŒ‚è½½ç­‰ã€‚</td>
</tr>
<tr>
<td><strong>Containerï¼ˆå®¹å™¨ï¼‰</strong></td>
<td>å®é™…è¿è¡Œçš„ Docker å®ä¾‹ï¼Œç”± Service åˆ›å»ºã€‚</td>
</tr>
<tr>
<td><strong>Volumeï¼ˆå·ï¼‰</strong></td>
<td>æŒä¹…åŒ–æ•°æ®ï¼Œç”¨å®¿ä¸»æœºç›®å½•æˆ– Docker å·å­˜å‚¨æ•°æ®åº“ã€ç¼“å­˜ã€ç…§ç‰‡ç­‰ã€‚</td>
</tr>
<tr>
<td><strong>Networkï¼ˆç½‘ç»œï¼‰</strong></td>
<td>å†…éƒ¨å®¹å™¨é—´é€šä¿¡ç½‘ç»œï¼Œè‡ªåŠ¨åˆ›å»ºï¼Œä¿è¯æœåŠ¡å¯ä»¥äº’ç›¸è®¿é—®ã€‚</td>
</tr>
<tr>
<td><strong>Projectï¼ˆé¡¹ç›®ï¼‰</strong></td>
<td>ä¸€ä¸ª Compose æ–‡ä»¶åŠå…¶ç›¸å…³å®¹å™¨ã€å·ã€ç½‘ç»œçš„é›†åˆï¼Œé»˜è®¤ç”¨ç›®å½•åä½œä¸ºé¡¹ç›®åã€‚</td>
</tr>
</tbody></table>
<h2 id="ä¸‰-Compose-æ–‡ä»¶ç»“æ„"><a href="#ä¸‰-Compose-æ–‡ä»¶ç»“æ„" class="headerlink" title="ä¸‰. Compose æ–‡ä»¶ç»“æ„"></a>ä¸‰. Compose æ–‡ä»¶ç»“æ„</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.8&quot;</span>  <span class="comment"># Compose æ–‡ä»¶ç‰ˆæœ¬</span></span><br><span class="line"><span class="attr">services:</span>       <span class="comment"># å®šä¹‰æœåŠ¡</span></span><br><span class="line">  <span class="attr">photoprism:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoprism/photoprism:latest</span>  <span class="comment"># é•œåƒ</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">photoprism</span>            <span class="comment"># å®¹å™¨åå­—</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span>               <span class="comment"># è‡ªåŠ¨é‡å¯ç­–ç•¥</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;2342:2342&quot;</span>                       <span class="comment"># ç«¯å£æ˜ å°„</span></span><br><span class="line">    <span class="attr">environment:</span>                           <span class="comment"># ç¯å¢ƒå˜é‡</span></span><br><span class="line">      <span class="attr">PHOTOPRISM_ADMIN_PASSWORD:</span> <span class="string">&quot;å¯†ç &quot;</span></span><br><span class="line">    <span class="attr">volumes:</span>                               <span class="comment"># æŒ‚è½½å·</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;D:/photoprism/originals:/photoprism/originals&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;D:/photoprism/storage:/photoprism/storage&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.3&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">dev:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="comment"># deploy.replicas: 3 </span></span><br><span class="line">    <span class="attr">user:</span> <span class="string">gbase</span></span><br><span class="line">    <span class="attr">privileged:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">shm_size:</span> <span class="string">2G</span></span><br><span class="line">    <span class="attr">working_dir:</span> <span class="string">/home/gbase</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./config/env.list</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">app-data:/data/app</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">mynet</span></span><br><span class="line">    <span class="attr">sysctls:</span></span><br><span class="line">      <span class="attr">net.ipv6.conf.all.disable_ipv6:</span> <span class="number">0</span> </span><br><span class="line">      <span class="attr">net.ipv6.conf.default.disable_ipv6:</span> <span class="number">0</span></span><br><span class="line">    <span class="attr">ulimits:</span></span><br><span class="line">      <span class="attr">nofile:</span> <span class="number">655360</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">mynet:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">bridge</span></span><br><span class="line">    <span class="attr">enable_ipv6:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">ipam:</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">subnet:</span> <span class="string">&quot;fd00:1234:5678::/64&quot;</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">subnet:</span> <span class="string">&quot;172.20.0.0/24&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">app-data:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">local</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># æ™®é€š Compose:</span><br><span class="line">docker-compose -p gjf up -d --scale dev=3</span><br><span class="line"># Swarm Compose:</span><br><span class="line">docker stack deploy -c docker-compose.yml gjf</span><br><span class="line">deploy.replicas: 3 ç”Ÿæ•ˆ</span><br><span class="line"></span><br><span class="line"># stop and delete</span><br><span class="line">docker-compose -p gjf down</span><br></pre></td></tr></table></figure>

<h2 id="å››-å¸¸ç”¨å‘½ä»¤"><a href="#å››-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å››. å¸¸ç”¨å‘½ä»¤"></a>å››. å¸¸ç”¨å‘½ä»¤</h2><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody><tr>
<td><code>docker-compose up -d</code></td>
<td>åˆ›å»ºå¹¶å¯åŠ¨æœåŠ¡ï¼ˆåå°æ¨¡å¼ï¼‰</td>
</tr>
<tr>
<td><code>docker-compose down</code></td>
<td>åœæ­¢å¹¶åˆ é™¤å®¹å™¨ã€ç½‘ç»œï¼ˆå·å¯ä¿ç•™ï¼‰</td>
</tr>
<tr>
<td><code>docker-compose stop</code></td>
<td>åœæ­¢å®¹å™¨ï¼Œä½†ä¸åˆ é™¤</td>
</tr>
<tr>
<td><code>docker-compose start</code></td>
<td>å¯åŠ¨å·²å­˜åœ¨å®¹å™¨</td>
</tr>
<tr>
<td><code>docker-compose restart</code></td>
<td>åœæ­¢ + å¯åŠ¨</td>
</tr>
<tr>
<td><code>docker-compose logs -f</code></td>
<td>æŸ¥çœ‹å®æ—¶æ—¥å¿—</td>
</tr>
<tr>
<td><code>docker-compose exec &lt;service&gt; &lt;cmd&gt;</code></td>
<td>è¿›å…¥å®¹å™¨æ‰§è¡Œå‘½ä»¤ï¼ˆç±»ä¼¼ <code>docker exec</code>ï¼‰</td>
</tr>
<tr>
<td><code>docker-compose ps</code></td>
<td>æŸ¥çœ‹å½“å‰é¡¹ç›®çš„å®¹å™¨çŠ¶æ€</td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jeffrey-fly-github-io.pages.dev/2022/06/20/python/python-tricks/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Jeffrey">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QuantumRealm">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | QuantumRealm">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/06/20/python/python-tricks/" class="post-title-link" itemprop="url">python_tricks</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-06-20 10:00:33" itemprop="dateCreated datePublished" datetime="2022-06-20T10:00:33+08:00">2022-06-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="pythonå‚æ•°çµæ´»æ€§"><a href="#pythonå‚æ•°çµæ´»æ€§" class="headerlink" title="pythonå‚æ•°çµæ´»æ€§"></a>pythonå‚æ•°çµæ´»æ€§</h2><p>ä½ç½®å‚æ•° + é»˜è®¤å‚æ•° + *args + **kwargs</p>
<table>
<thead>
<tr>
<th>è¯­æ³•</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>*args</code></td>
<td>æ”¶é›†æ‰€æœ‰ <strong>ä½ç½®å‚æ•°</strong>ï¼Œç»„æˆå…ƒç»„</td>
</tr>
<tr>
<td><code>**kwargs</code></td>
<td>æ”¶é›†æ‰€æœ‰ <strong>å…³é”®å­—å‚æ•°</strong>ï¼Œç»„æˆå­—å…¸</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a, b=<span class="number">2</span>, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(a, b, kwargs)</span><br><span class="line"></span><br><span class="line">func(<span class="number">1</span>, c=<span class="number">3</span>, d=<span class="number">4</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºï¼š1 2 &#123;&#x27;c&#x27;: 3, &#x27;d&#x27;: 4&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="è¿”å›å€¼çµæ´»æ€§"><a href="#è¿”å›å€¼çµæ´»æ€§" class="headerlink" title="è¿”å›å€¼çµæ´»æ€§"></a>è¿”å›å€¼çµæ´»æ€§</h2><p>Python å‡½æ•°æ²¡æœ‰å›ºå®šè¿”å›ç±»å‹ã€‚å¯ä»¥è¿”å›ä»»æ„å¯¹è±¡ï¼šæ•°å­—ã€å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å­—å…¸ã€å¯¹è±¡ï¼Œç”šè‡³å‡½æ•°æœ¬èº«ã€‚è°ƒç”¨æ–¹åªè¦æŒ‰ç…§çº¦å®šå¤„ç†å³å¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">example</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">if</span> x &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;negative&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="è™šæ‹Ÿç¯å¢ƒçš„ä½¿ç”¨"><a href="#è™šæ‹Ÿç¯å¢ƒçš„ä½¿ç”¨" class="headerlink" title="è™šæ‹Ÿç¯å¢ƒçš„ä½¿ç”¨"></a>è™šæ‹Ÿç¯å¢ƒçš„ä½¿ç”¨</h2><ul>
<li>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3<span class="number">.14</span> -m venv .venv</span><br></pre></td></tr></table></figure></li>
<li>ç»ˆç«¯æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">source .venv/<span class="built_in">bin</span>/activate</span><br><span class="line">python --version</span><br><span class="line">which python</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="å¯¼å‡ºç¬¬ä¸‰æ–¹ä¾èµ–"><a href="#å¯¼å‡ºç¬¬ä¸‰æ–¹ä¾èµ–" class="headerlink" title="å¯¼å‡ºç¬¬ä¸‰æ–¹ä¾èµ–"></a>å¯¼å‡ºç¬¬ä¸‰æ–¹ä¾èµ–</h2><ul>
<li>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</li>
<li>ä½¿ç”¨ pip freeze å¯¼å‡º  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip freeze --local &gt; requirements.txt</span><br></pre></td></tr></table></figure></li>
<li>å¤ç°ç¯å¢ƒ  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="æ‰“åŒ…"><a href="#æ‰“åŒ…" class="headerlink" title="æ‰“åŒ…"></a>æ‰“åŒ…</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pip install pyinstaller</span><br><span class="line"></span><br><span class="line">pyinstaller \</span><br><span class="line">  --windowed \</span><br><span class="line">  --name MyApp \</span><br><span class="line">  main.py</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>macos  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">brew install create-dmg</span><br><span class="line"></span><br><span class="line">create-dmg \</span><br><span class="line">MyApp.app \</span><br><span class="line">dist/</span><br></pre></td></tr></table></figure>
  ç”Ÿæˆ  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dist/MyApp.dmg</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2026</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Jeffrey</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
